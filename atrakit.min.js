/** @preserve ATRAKIT: VIEW DOC|CODE|LIC @ github.com/chadkluck/atrakit */
"undefined"==typeof atrakit&&(atrakit=!1),function(t){var a=!1,e=!1,n="txt|pdf|pptx?|xlsx?|docx?|mp(3|4|eg)|mov|avi|wmv|wav|zip|jar|gif|jpe?g|png|exe|css|js",i={a:"click",button:"click",form:"submit",select:"change",input:"change"},r={TRAD:{desc:"Using Traditional Google Analytics (ga.js)",eventfn:function(t,a,e){pageTracker._trackEvent(t,a,e)},pagefn:function(t){pageTracker._trackPageview(t)},detectfn:function(){return"undefined"!=typeof gaJsHost}},CLAS:{desc:"Using Async Classic Google Analytics (ga.js async)",eventfn:function(t,a,e){_gaq.push(["_trackEvent",t,a,e])},pagefn:function(t){_gaq.push(["_trackPageview",t])},detectfn:function(){return"undefined"!=typeof _gaq}},UNIV:{desc:"Using Universal Analytics (analytics.js)",eventfn:function(t,a,e){ga("send","event",t,a,e)},pagefn:function(t){ga("send","pageview",t)},detectfn:function(){return"undefined"!=typeof ga}},GTMX:{desc:"Using Google Tag Manager",eventfn:function(t,a,e){gtag("event",a,{event_category:t,event_label:e})},pagefn:function(t){},detectfn:function(){return"undefined"!=typeof dataLayer}},NONE:{desc:"No Analytics Detected",eventfn:function(t,a,e){},pagefn:function(t){},detectfn:function(){return!1}}},o=null,c=0,d=["Track Only","Tag and Track","Tag Only"],l=function(t){if(!a){var e=new Date,n=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"."+e.getMilliseconds();console.log("ATRAKIT ["+n+"] : "+t)}},s=function(a){var n=e?n=" ("+a.type+")":"",i=t(this);i.atrakitAdd("data"),v(i.attr("data-category"),i.attr("data-action")+n,i.attr("data-label"))},f=function(a,e){void 0===e&&(e={});var n,i=function(t,a){switch(t){case"category":0===r&&(r=a);break;case"action":0===o&&(o=a);break;case"label":0===d&&(d=a)}},r=0,o=0,d=0,l=!1;if(e!=={}&&(r=void 0!==e.category?e.category:0,o=void 0!==e.action?e.action:0,d=void 0!==e.label?e.label:0,l=!0),0===r&&(r=void 0!==t(a).attr("data-category")?t(a).attr("data-category"):0),0===o&&(o=void 0!==t(a).attr("data-action")?t(a).attr("data-action"):0),0===d&&(d=void 0!==t(a).attr("data-label")?t(a).attr("data-label"):0),c++,!r||!o||!d){var s=t(a).prop("tagName").toUpperCase();if("A"===s)if(t(a).attr("href")){var f=u(t(a));if(f.isDownload)i("category","Download"),i("action","Download ("+f.type+")"),i("label",f.name+" ("+f.path+")");else{var g=t(a).attr("href");/^mailto:/i.test(g)?(i("category","Contact"),i("action","Email"),i("label",g)):/^tel:/i.test(g)?(i("category","Contact"),i("action","Telephone"),i("label",g)):/^javascript:/i.test(g)?(i("category","Script"),i("action","Link"),i("label","'javascript:' in HREF")):(i("label",t(a).attr("href")),i("action","Link"))}}else{i("label","A"+(void 0!==t(a).attr("id")?"#"+t(a).attr("id")+" ":"")+" "+(t(a).text()?t(a).text():"Empty Text")+" (No HREF)")}else if("INPUT"===s||"SELECT"===s)i("label",function(a){var e="";if(void 0!==t(a).closest("[id]").attr("id")){var n=t(a).closest("[id]");e=n.prop("tagName")+"#"+n.attr("id")+" "}return e}(a)+s+(void 0!==t(n=a).attr("id")?"#"+t(n).attr("id"):" ")+"[name='"+t(a).attr("name")+"']");else if("FORM"===s){i("action","Form Submitted");var v=void 0!==t(a).attr("id")?"#"+t(a).attr("id"):"";t(a).attr("action")?i("label","FORM"+v+" submitted to "+t(a).attr("action")):i("label","FORM"+v+" submitted from "+window.location.href)}else t(a).attr("id")?i("label",s+"#"+t(a).attr("id")):t(a).closest("[id]")?i("label",t(a).closest("[id]").prop("tagName")+"#"+t(a).closest("[id]").attr("id")+" "+s):t(a).attr("title")?i("label",s+" "+t(a).attr("title")):t(a).closest("[title]")?i("label",t(a).closest("[id]").prop("tagName")+" "+t(a).closest("[title]").attr("title")+" "+s):i("label",s+" at "+window.location.href);i("action","Event Trigger"),i("category",s),l=!0}l&&t(a).attr({"data-label":d,"data-action":o,"data-category":r})},g=function(a){if(t(a).attr("data-category")&&t(a).attr("data-action")&&t(a).attr("data-label")){var e="click";if(t(a).attr("data-atrakit-event"))e=t(a).attr("data-atrakit-event"),t(a).on(e,s);else{var n=t(a).prop("tagName"),r={};try{Object.keys(i).forEach(function(t){if(n===t)throw e=i[t],r},i)}catch(t){if(t!==r)throw t}}t(a).on(e,s)}else l("No data tags so no event added")},u=function(a){var e={isDownload:!1};if("A"===t(a).prop("tagName").toUpperCase()){var i=t(a)[0].pathname;if(new RegExp("("+n+")$","gi").test(i)){var r=i.substring(i.lastIndexOf("/")+1),o=r.substring(r.lastIndexOf(".")+1).toUpperCase();e={isDownload:!0,name:r,type:o,path:t(a)[0].hostname+i}}}return e},v=function(t,a,e){p().eventfn(t,a,e),l("Event Triggered (category: '"+t+"', action: '"+a+"', label: '"+e+"') Sent To: "+p().name)},p=function(){if(null==o){(o=r.NONE).name="NONE";var t={};try{Object.keys(r).forEach(function(a){if(this[a].detectfn())throw(o=r[a]).name=a,t},r)}catch(a){if(a!==t)throw a}l(o.desc)}return o},k=function(){return"NONE"!==p().name};t.fn.atrakitAdd=function(t,a){return void 0===t&&(t="both"),void 0===a&&(a={}),this.each(function(){switch(t.toLowerCase()){case"data":f(this,a);break;case"event":g(this);break;case"both":f(this,a),g(this);break;default:l("Unknown Command for atrakitAdd(): "+t)}})},t.fn.atrakit=function(f,g){switch(void 0===f&&(f="init"),void 0===g&&(g={}),f.toLowerCase()){case"init":var u=0;void 0!==g.tagOnly&&(u=g.tagOnly?1:u),void 0!==g.trackOnly&&(u=g.trackOnly?-1:u),function(a,e){var n=new Date;if(t(document).atrakitGet("gaFlavor"),a.is(document)&&(a=t(document.getElementsByTagName("BODY")[0])),void 0===a.prop("tagName"))l("Tracking selector returned 0 results");else{if(l("Init on for "+a.prop("tagName")+": "+d[e+1]),e>=0){var r="",o="[data-category][data-action][data-label], [data-atrakit='false']";r="form, select:required, input:required, a[href=''], a[href^='javascript:'], a[href^='mailto:'], a[href^='tel:'], a.button, button, [data-atrakit='true'], [data-atrakit-event]",a.find(r).not(o).atrakitAdd("data"),r="a[href*='#'], a[href*='.']",a.find(r).not(".button, "+o).atrakitLinkFilter().atrakitAdd("data")}if(e<=0){var f="";Object.keys(i).forEach(function(t){a.on(i[t],t+"[data-category]:not([data-atrakit-event])",s),f=f+t+", "},i),a.find("[data-category][data-atrakit-event]").each(function(){t(this).on(t(this).attr("data-atrakit-event"),s)}),a.on("click","[data-category]:not("+f+"[data-atrakit-event])",s)}}var g=Math.abs(new Date-n);l("Init of "+c+" elements completed in "+g+" milliseconds")}(t(this),u);break;case"config":void 0!==g.silence&&(g.silence?(l("Silenced"),a=!0):(a=!1,l("Unsilenced"))),void 0!==g.listEventType&&(g.listEventType?(l("Event types will be sent with Action Attributes"),e=!0):(l("Event types will NOT be sent with Action Attributes"),e=!1)),void 0!==g.customAnalytic&&(p=g.customAnalytic,r.addElem(p),o=null,k()),void 0!==g.fileTypes&&(v=g.fileTypes,n=v);break;default:l("Unknown Command for atrakit(): "+f)}var v,p;return this},t.fn.atrakitGet=function(t,a){void 0===t&&(t="gaFlavor"),void 0===a&&(a="");var e="";switch(t.toLowerCase()){case"gaflavor":e=p();break;case"is":""!==a?e=a.toUpperCase()===p().name:l("Empty arg for atrakitGet('is', arg)");break;default:l("Unknown Command for atrakitGet(): "+t)}return e},t.fn.atrakitLinkFilter=function(){var a=window.location.hostname.replace(/\./g,"\\."),e="("+("(https?\\:)?\\/\\/(?!"+a+")")+")|("+("\\.(?:"+n+")(?=\\?([^#]*))?(?:#(.*))?")+")|("+("(("+a+"){0,1}.*#)|^\\s*$")+")";return this.filter(function(){return new RegExp(e,"gi").test(t(this).attr("href"))})},atrakit=!0===!0,atrakit,l("Loaded Analytics TRAcking toolKIT (github.com/chadkluck/atrakit) [ver0.1.4-20210107-1223]"),k()}(jQuery);
